{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/hp/Desktop/Moviesapp/movies/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _toConsumableArray from\"C:/Users/hp/Desktop/Moviesapp/movies/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _asyncToGenerator from\"C:/Users/hp/Desktop/Moviesapp/movies/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _classCallCheck from\"C:/Users/hp/Desktop/Moviesapp/movies/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"C:/Users/hp/Desktop/Moviesapp/movies/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"C:/Users/hp/Desktop/Moviesapp/movies/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"C:/Users/hp/Desktop/Moviesapp/movies/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import React,{Component}from'react';// import { movies } from './getmovies'\nimport axios from'axios';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Movies=/*#__PURE__*/function(_Component){_inherits(Movies,_Component);var _super=_createSuper(Movies);function Movies(){var _this;_classCallCheck(this,Movies);_this=_super.call(this);_this.changeMovies=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var res,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:console.log('Change Movies called');console.log(_this.state.currPage);_context.next=4;return axios.get(\"https://api.themoviedb.org/3/movie/popular?api_key=5d9e83e0ec9df654c0a8c9699910552a&language=en-US&page=\".concat(_this.state.currPage));case 4:res=_context.sent;data=res.data;// console.log(data);\n_this.setState({movies:_toConsumableArray(data.results)});case 7:case\"end\":return _context.stop();}}},_callee);}));_this.handleRight=function(){var temparr=[];for(var i=1;i<=_this.state.parr.length+1;i++){temparr.push(i);}_this.setState({parr:[].concat(temparr),currPage:_this.state.currPage+1},_this.changeMovies);};_this.handleleft=function(){if(_this.state.currPage!==1){_this.setState({currPage:_this.state.currPage-1},_this.changeMovies);}};_this.handleclick=function(value){if(value!==_this.state.currPage){_this.setState({currPage:value},_this.changeMovies);}};_this.handleFavourites=function(movie){var oldData=JSON.parse(localStorage.getItem('movies-app')||\"[]\");if(_this.state.favourites.includes(movie.id)){oldData=oldData.filter(function(m){return m.id!=movie.id;});}else{oldData.push(movie);}// DATA in localbase is tored as a string\nlocalStorage.setItem(\"movies-app\",JSON.stringify(oldData));// SET ITEM IS synchronus\nconsole.log(oldData);_this.handleFavouritesStates();};_this.handleFavouritesStates=function(){var oldData=JSON.parse(localStorage.getItem(\"movies-app\")||\"[]\");var temp=oldData.map(function(movie){return movie.id;});_this.setState({favourites:_toConsumableArray(temp)});};_this.state={hover:'',parr:[1],currPage:1,movies:[],favourites:[]};return _this;}_createClass(Movies,[{key:\"componentDidMount\",value:function(){var _componentDidMount=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var res,data;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return axios.get(\"https://api.themoviedb.org/3/movie/popular?api_key=5d9e83e0ec9df654c0a8c9699910552a&language=en-US&page=\".concat(this.state.currPage));case 2:res=_context2.sent;data=res.data;// console.log(data);\nthis.setState({movies:_toConsumableArray(data.results)});console.log('mounting done');case 6:case\"end\":return _context2.stop();}}},_callee2,this);}));function componentDidMount(){return _componentDidMount.apply(this,arguments);}return componentDidMount;}()},{key:\"render\",value:function render(){var _this2=this;// console.log('render');\n// let movie = movies.results;\nreturn/*#__PURE__*/_jsx(_Fragment,{children:this.state.movies.length===0?/*#__PURE__*/_jsx(\"div\",{className:\"spinner-border text-primary\",role:\"status\",children:/*#__PURE__*/_jsx(\"span\",{className:\"visually-hidden\",children:\"Loading...\"})}):/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-center\",children:\"Trending\"}),/*#__PURE__*/_jsx(\"div\",{className:\"movies-list\",children:this.state.movies.map(function(movieobj){return/*#__PURE__*/_jsxs(\"div\",{className:\"card movies-card\",onMouseEnter:function onMouseEnter(){return _this2.setState({hover:movieobj.id});},onMouseLeave:function onMouseLeave(){return _this2.setState({hover:''});},children:[/*#__PURE__*/_jsx(\"img\",{src:\"https://image.tmdb.org/t/p/original\".concat(movieobj.backdrop_path),className:\"card-img-top movies-img\",alt:movieobj.title}),/*#__PURE__*/_jsx(\"h5\",{className:\"card-title movies-title\",children:movieobj.original_title}),/*#__PURE__*/_jsx(\"div\",{className:\"button-wrapper\",style:{display:'flex',justifyContent:'center',width:'100%'},children:_this2.state.hover===movieobj.id&&/*#__PURE__*/_jsx(\"a\",{className:\"btn btn-primary movies-button\",onClick:function onClick(){return _this2.handleFavourites(movieobj);},children:_this2.state.favourites.includes(movieobj.id)?\"Remove from favourites\":\"Add to favourites\"})})]});})}),/*#__PURE__*/_jsx(\"div\",{style:{display:'flex',justifyContent:'center',alignItems:'center',cursor:'pointer'},children:/*#__PURE__*/_jsx(\"nav\",{\"aria-label\":\"Page navigation example\",children:/*#__PURE__*/_jsxs(\"ul\",{class:\"pagination\",children:[/*#__PURE__*/_jsx(\"li\",{class:\"page-item\",children:/*#__PURE__*/_jsx(\"a\",{class:\"page-link \",onClick:this.handleleft,children:\"Previous\"})}),this.state.parr.map(function(value){return/*#__PURE__*/_jsx(\"li\",{class:\"page-item\",children:/*#__PURE__*/_jsx(\"a\",{class:\"page-link \",onClick:function onClick(){return _this2.handleclick(value);},children:value})});}),/*#__PURE__*/_jsx(\"li\",{class:\"page-item\",children:/*#__PURE__*/_jsx(\"a\",{class:\"page-link \",onClick:this.handleRight,children:\"Next\"})})]})})})]})});}}]);return Movies;}(Component);export{Movies as default};","map":{"version":3,"names":["React","Component","axios","Movies","changeMovies","console","log","state","currPage","get","res","data","setState","movies","results","handleRight","temparr","i","parr","length","push","handleleft","handleclick","value","handleFavourites","movie","oldData","JSON","parse","localStorage","getItem","favourites","includes","id","filter","m","setItem","stringify","handleFavouritesStates","temp","map","hover","movieobj","backdrop_path","title","original_title","display","justifyContent","width","alignItems","cursor"],"sources":["C:/Users/hp/Desktop/Moviesapp/movies/src/components/Movies.js"],"sourcesContent":["import React, { Component } from 'react'\r\n// import { movies } from './getmovies'\r\nimport axios from 'axios'\r\n\r\nexport default class Movies extends Component {\r\n\r\n    constructor(){\r\n        super();\r\n        this.state={\r\n            hover : '',\r\n            parr:[1],\r\n            currPage:1,\r\n            movies:[],\r\n            favourites:[]\r\n        }\r\n    }\r\n\r\n    async componentDidMount(){\r\n        //side effects\r\n        const res = await axios.get(`https://api.themoviedb.org/3/movie/popular?api_key=5d9e83e0ec9df654c0a8c9699910552a&language=en-US&page=${this.state.currPage}`);\r\n        let data = res.data ;\r\n        // console.log(data);\r\n        this.setState({\r\n            movies:[...data.results]\r\n        })\r\n        console.log('mounting done');\r\n    }\r\n    \r\n    changeMovies = async()=>{\r\n        console.log('Change Movies called');\r\n        console.log(this.state.currPage);\r\n        const res = await axios.get(`https://api.themoviedb.org/3/movie/popular?api_key=5d9e83e0ec9df654c0a8c9699910552a&language=en-US&page=${this.state.currPage}`);\r\n        let data = res.data ;\r\n        // console.log(data);\r\n        this.setState({\r\n            movies:[...data.results]\r\n        })\r\n    }\r\n\r\n    handleRight =()=>{\r\n       let temparr=[]\r\n       for(let i=1 ;i<=this.state.parr.length+1 ; i++){\r\n        temparr.push(i);\r\n       }\r\n       \r\n       this.setState({\r\n        parr:[...temparr],\r\n        currPage: this.state.currPage+1 \r\n       },this.changeMovies)\r\n    }\r\n\r\n    handleleft= ()=>{\r\n        if(this.state.currPage!==1){\r\n            this.setState({\r\n                currPage : this.state.currPage-1 \r\n            },this.changeMovies)\r\n\r\n        }\r\n    }\r\n\r\n    handleclick=(value)=>{\r\n          if(value!==this.state.currPage){\r\n            this.setState({\r\n                currPage:value\r\n            },this.changeMovies)\r\n          }\r\n    }\r\n    \r\n    handleFavourites=(movie)=>{\r\n          let oldData = JSON.parse(localStorage.getItem('movies-app') ||  \"[]\")\r\n          if(this.state.favourites.includes(movie.id)){\r\n               oldData  = oldData.filter((m)=>m.id!=movie.id);\r\n          }\r\n          else{\r\n            oldData.push(movie);\r\n          }\r\n\r\n          // DATA in localbase is tored as a string\r\n\r\n          localStorage.setItem(\"movies-app\",JSON.stringify(oldData));\r\n          // SET ITEM IS synchronus\r\n\r\n          console.log(oldData);\r\n          this.handleFavouritesStates();\r\n    }\r\n    handleFavouritesStates=()=>{\r\n        let oldData = JSON.parse(localStorage.getItem(\"movies-app\") || \"[]\")\r\n        let temp = oldData.map((movie)=>movie.id);\r\n        this.setState({\r\n            favourites:[...temp]\r\n        })\r\n\r\n    }\r\n\r\n    render() {\r\n        // console.log('render');\r\n        // let movie = movies.results;\r\n        return (\r\n\r\n            <>\r\n                {\r\n                    this.state.movies.length === 0 ?\r\n                        <div className=\"spinner-border text-primary\" role=\"status\">\r\n                            <span className=\"visually-hidden\">Loading...</span>\r\n                        </div>\r\n                        :\r\n                        <div>\r\n                            <h3 className='text-center'>Trending</h3>\r\n                            <div className=\"movies-list\">\r\n                                {\r\n                                    this.state.movies.map((movieobj) => (\r\n                                        <div className=\"card movies-card\" onMouseEnter={()=>this.setState({hover: movieobj.id})} onMouseLeave={()=>this.setState({hover:''})}>\r\n                                            <img src={`https://image.tmdb.org/t/p/original${movieobj.backdrop_path}`} className=\"card-img-top movies-img\" alt={movieobj.title} />\r\n                                            {/* <div className=\"card-body\"> */}\r\n                                            <h5 className=\"card-title movies-title\">{movieobj.original_title}</h5>\r\n                                            {/* <p className=\"card-text movies-text\">{movieobj.overview}</p> */}\r\n                                            <div className=\"button-wrapper\" style={{ display: 'flex', justifyContent: 'center', width: '100%' }}>\r\n                                                {\r\n                                                    this.state.hover === movieobj.id &&\r\n                                                    <a className=\"btn btn-primary movies-button\" onClick={()=>this.handleFavourites(movieobj)}> \r\n                                                    {this.state.favourites.includes(movieobj.id)?\"Remove from favourites\":\"Add to favourites\"}</a>\r\n                                                }\r\n                                            </div>\r\n                                        </div>\r\n                                    ))\r\n                                }\r\n                            </div>\r\n\r\n                            {/* pagination */}\r\n                            <div style ={{display:'flex',justifyContent:'center', alignItems:'center', cursor:'pointer'}}>\r\n                                <nav aria-label=\"Page navigation example\">\r\n                                    <ul class=\"pagination\">\r\n\r\n                                     <li class=\"page-item\"><a class=\"page-link \" onClick={this.handleleft}>Previous</a></li>\r\n\r\n                                     {\r\n                                        this.state.parr.map((value)=>(\r\n\r\n                                            <li class=\"page-item\"><a class=\"page-link \" onClick={()=>this.handleclick(value)} >{value}</a></li>\r\n                                        ))\r\n                                     }\r\n\r\n                                     <li class=\"page-item\"><a class=\"page-link \" onClick={this.handleRight} >Next</a></li>\r\n\r\n                                   </ul>\r\n                                </nav>\r\n                            </div>\r\n\r\n                        </div>\r\n\r\n                }\r\n            </>\r\n\r\n        )\r\n    }\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}